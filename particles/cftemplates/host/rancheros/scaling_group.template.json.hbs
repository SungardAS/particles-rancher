{{#layout}}

  {{set "host/parameters_rancheros"}}
  {{set "host/parameters_scaling_group"}}

  {{mapping "rancheros_ami" logicalId="RancherAmiMap"}}
  {{mapping "rancheros_versions" logicalId="RancherVersionMap"}}

  {{
    set "host/resources_scaling_group"
    cattleHostLabels=(ref "CattleHostLabels")
    imageId='{"Fn::FindInMap": ["RancherAmiMap", {"Ref": "AWS::Region"}, {"Fn::FindInMap": ["RancherVersionMap", {"Ref": "OsVersion"}, "mapName"]} ]}'
    userData=(
      partial "userdata/rancheros"
      dockerVersion='{"Fn::FindInMap": ["RancherVersionMap", {"Ref": "OsVersion"}, "dockerVersion"]}'
      metadataResource="LaunchConfiguration"
      notifyResource="AutoScaleGroup"
    )
  }}

{{/layout}}

