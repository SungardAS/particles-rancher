{{#layout}}

  {{set "host/parameters_ubuntu"}}

  {{mapping "ubuntu_ami" logicalId="AmiMap"}}
  {{mapping "ubuntu_versions" logicalId="VersionMap"}}

  {{
    set "host/instance"
    imageId='{"Fn::FindInMap": ["AmiMap", {"Ref": "AWS::Region"}, {"Fn::FindInMap": ["VersionMap", {"Ref": "DockerVersion"}, "mapName"]} ]}'
    userData=(
      partial "userdata/ubuntu"
      dockerPackage='{"Fn::FindInMap": ["VersionMap", {"Ref": "DockerVersion"}, "dockerPackage"]}'
      cfnBootstrapTag='{"Fn::FindInMap": ["VersionMap", {"Ref": "DockerVersion"}, "dockerVersion"]}'
      metadataResource="Instance"
      notifyResource="Instance"
    )
  }}

{{/layout}}
