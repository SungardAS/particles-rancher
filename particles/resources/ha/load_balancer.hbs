{{#resource "m:core" "base" type="AWS::ElasticLoadBalancing::LoadBalancer"}}
  "Properties": {
    "CrossZone": true,
    "SecurityGroups": {{helper "m:core" "propertyValue" securityGroups}},
    "Subnets": {{helper "m:core" "propertyValue" subnets}},
    "Listeners": [
      {
        "LoadBalancerPort": "80",
        "InstancePort": "8080",
        "Protocol": "TCP"
      }
    ],
    "Policies" : [{
      "PolicyName" : "EnableProxyProtocol",
      "PolicyType" : "ProxyProtocolPolicyType",
      "Attributes" : [{
        "Name"  : "ProxyProtocol",
          "Value" : "true"
        }],
      "InstancePorts": ["8080"]
    }],
    "HealthCheck": {
      "HealthyThreshold": "3",
      "Interval": "10",
      "Timeout": "5",
      "UnhealthyThreshold": "2",
      "Target": "TCP:8080"
    }
  }
{{/resource}}

